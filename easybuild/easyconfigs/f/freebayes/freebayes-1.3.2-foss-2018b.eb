# This file is an EasyBuild reciPY as per https://github.com/easybuilders/easybuild

easyblock = 'MakeCp'

name = 'freebayes'
version = '1.3.2'

homepage = 'https://github.com/ekg/%(name)s'
description = "Bayesian haplotype-based polymorphism discovery and genotyping."

toolchain = {'name': 'foss', 'version': '2018b'}

sources = [{
    'filename': '%(name)s-%(version)s.tar.gz',
    'git_config': {
        'url': 'https://github.com/ekg',
        'repo_name': '%(name)s',
        'tag': 'v%(version)s',
        'recursive': True,
    },
}]
checksums = [None]

builddependencies = [('CMake', '3.11.4')]

dependencies = [('zlib', '1.2.11')]

parallel = 1

runtest = 'test'

files_to_copy = ["*"]

sanity_check_paths = {
    'files': ['bin/%(name)s', 'bin/bamleftalign'],
    'dirs': ['scripts', 'vcflib/bin', 'vcflib/tabixpp/htslib'],
}

# add scripts dir and vcflib binaries to PATH
modextrapaths = {
    'PATH': ['scripts', 'vcflib/bin'],
    'LD_LIBRARY_PATH': 'vcflib/tabixpp/htslib',
}

moduleclass = 'bio'
